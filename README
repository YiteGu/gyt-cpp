This project use to test libibverbs API.
1.
g++ ibv_test.cc -libverbs
2. server endpoint
# ./a.out
3. client endpoint
# ./a.out 1 2
server output:
waiting client connection...
TCP established
rdma dev count: 1
rdma dev name: mlx5_bond_0
lid=0
ready to send_message: send message
register memory successed, detail info: offset=0x7fff6be36998 length=13 lkey=219211 rkey=219211
create QP successed, QP number=5139
successed modify QP state to init
send msg done
recv msg done
peer_addr=0x7fff6be36690 peer_rkey=216382 peer_qpn=5138 peer_lid=0
modify QP state to RTR done
modify QP state to RTS done
post SR done
completion was found in CQ with status 0x0
Contents of server's buffer at momen: I am client

client output:
TCP established
rdma dev count: 1
rdma dev name: mlx5_bond_0
lid=0
ready to send_message: send message
register memory successed, detail info: offset=0x7ffe06e08028 length=13 lkey=216382 rkey=216382
create QP successed, QP number=5138
successed modify QP state to init
send msg done
recv msg done
peer_addr=0x7ffe06e07d20 peer_rkey=219211 peer_qpn=5139 peer_lid=0
Receive Request was posted
modify QP state to RTR done
modify QP state to RTS done
completion was found in CQ with status 0x0
Message is: send message
post SR done
completion was found in CQ with status 0x0
Contents of server's buffer: I am server
Contents of client's buffer at momen: I am client
post SR done
completion was found in CQ with status 0x0
